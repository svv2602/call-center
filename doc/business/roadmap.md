# Дорожная карта проекта

## Общий таймлайн

```mermaid
gantt
    title Call Center AI — Дорожная карта
    dateFormat  YYYY-MM-DD
    axisFormat  %d %b

    section Подготовка
    Настройка окружения, CI/CD        :prep1, 2025-04-01, 3d
    Google Cloud / Anthropic аккаунты :prep2, 2025-04-01, 2d
    Настройка тестового Asterisk      :prep3, after prep1, 2d

    section Фаза 1 — MVP
    AudioSocket сервер                :f1a, after prep3, 5d
    Google STT интеграция             :f1b, after f1a, 4d
    Google TTS интеграция             :f1c, after f1a, 4d
    LLM-агент + tools                 :f1d, after f1b, 5d
    Pipeline STT→LLM→TTS             :f1e, after f1d, 3d
    Store API (каталог, наличие)      :f1f, after prep3, 10d
    Интеграционное тестирование       :f1g, after f1e, 3d
    Пилот (10% трафика)              :milestone, f1m, after f1g, 5d

    section Фаза 2 — Заказы
    Store API (заказы)                :f2a, after f1m, 5d
    Идентификация по CallerID         :f2b, after f1m, 3d
    Статус заказа (tool + prompt)     :f2c, after f2b, 3d
    Оформление заказа (tool + prompt) :f2d, after f2c, 5d
    Тестирование и доработка          :f2e, after f2d, 4d

    section Фаза 3 — Сервисы
    Store API (шиномонтаж)            :f3a, after f2e, 5d
    Запись на шиномонтаж              :f3b, after f3a, 5d
    База знаний + pgvector            :f3c, after f2e, 5d
    Экспертные консультации (RAG)     :f3d, after f3c, 5d
    Комплексные сценарии              :f3e, after f3d, 3d
    Тестирование                      :f3f, after f3e, 4d

    section Фаза 4 — Аналитика
    Логирование и транскрипции        :f4a, after f3f, 5d
    Grafana-дашборд                   :f4b, after f4a, 5d
    Оценка качества диалогов          :f4c, after f4b, 5d
    A/B тестирование промптов         :f4d, after f4c, 5d
    Веб-админка                       :f4e, after f4d, 8d
    Оптимизация расходов              :f4f, after f4e, 5d
```

## Фазы детально

### Фаза 1 — MVP (6 недель)

**Цель:** бот принимает звонки, подбирает шины, проверяет наличие, переключает на оператора.

**Milestone:** пилотный запуск на 10% входящих звонков.

| Задача | Срок | Зависимости |
|--------|------|-------------|
| Настройка инфраструктуры (Docker, CI/CD, staging) | 3 дня | — |
| Google Cloud и Anthropic API — аккаунты, ключи | 2 дня | — |
| Asterisk AudioSocket — dialplan + тестовый канал | 2 дня | Инфраструктура |
| AudioSocket TCP-сервер (Python) | 5 дней | Asterisk |
| Google STT streaming интеграция | 4 дня | AudioSocket |
| Google TTS интеграция | 4 дня | AudioSocket |
| LLM-агент (Claude) + tools (search, availability) | 5 дней | STT |
| Pipeline: STT → LLM → TTS (barge-in, таймауты) | 3 дня | Все компоненты |
| Store API: каталог, поиск, наличие, подбор по авто | 10 дней | — (параллельно) |
| Интеграционное тестирование | 3 дня | Pipeline + API |
| Пилотный запуск (10% трафика) | 5 дней | Всё |

**Результат:** экономия начинается сразу — бот обрабатывает 50%+ простых запросов.

---

### Фаза 2 — Заказы (+4 недели)

**Цель:** бот проверяет статус заказа и проводит полный цикл оформления.

**Milestone:** первый заказ, оформленный ботом без участия оператора.

| Задача | Срок | Зависимости |
|--------|------|-------------|
| Store API: заказы (CRUD, статусы, доставка) | 5 дней | — |
| Идентификация клиента по CallerID (ARI) | 3 дня | Фаза 1 |
| Tool + prompt: статус заказа | 3 дня | API |
| Tool + prompt: оформление заказа (черновик → подтверждение) | 5 дней | API |
| Безопасность: подтверждение, лимиты, отмена | 2 дня | Оформление |
| Тестирование и доработка | 4 дня | Всё |

**Результат:** 70%+ звонков о статусе обрабатываются ботом. Заказы оформляются без оператора.

---

### Фаза 3 — Сервисы (+5 недель)

**Цель:** запись на шиномонтаж и экспертные консультации.

**Milestone:** первая запись на шиномонтаж через бота; RAG-консультация с использованием базы знаний.

| Задача | Срок | Зависимости |
|--------|------|-------------|
| Store API: шиномонтаж (точки, слоты, бронирование) | 5 дней | — |
| Tool + prompt: запись на шиномонтаж | 5 дней | API |
| PostgreSQL + pgvector: хранилище базы знаний | 3 дней | — |
| Наполнение базы знаний (бренды, FAQ, гайды) | 3 дня | pgvector |
| Tool + prompt: экспертная консультация (RAG) | 5 дней | База знаний |
| Комплексные сценарии (подбор → заказ → монтаж) | 3 дня | Всё |
| Тестирование | 4 дня | Всё |

**Результат:** полный цикл обслуживания через бота. 70%+ звонков без оператора.

---

### Фаза 4 — Аналитика (+6 недель)

**Цель:** понимать, как работает бот, и системно улучшать качество.

**Milestone:** дашборд с метриками в реальном времени; первый A/B тест промптов.

| Задача | Срок | Зависимости |
|--------|------|-------------|
| Структурированное логирование звонков | 5 дней | — |
| Grafana + Prometheus — дашборд реального времени | 5 дней | Логирование |
| Автоматическая оценка качества (LLM-ревью) | 5 дней | Логирование |
| A/B тестирование промптов | 5 дней | Оценка качества |
| Веб-админка (журнал, промпты, база знаний) | 8 дней | Всё |
| Оптимизация расходов (кэш TTS, роутинг LLM) | 5 дней | Аналитика |

**Результат:** полная прозрачность работы бота. Инструменты для непрерывного улучшения.

---

## Ключевые вехи

```mermaid
timeline
    title Ключевые вехи проекта
    Неделя 6  : MVP запущен
              : Пилот на 10% трафика
    Неделя 8  : Полный запуск MVP
              : 50%+ звонков через бота
    Неделя 12 : Заказы через бота
              : Проект окупился
    Неделя 17 : Шиномонтаж + консультации
              : 70%+ звонков через бота
    Неделя 23 : Аналитика и оптимизация
              : Полная версия системы
```

## Команда

| Роль | Количество | Фазы |
|------|------------|------|
| Python-разработчик (бэкенд + AI) | 1–2 | Все фазы |
| Разработчик Store API | 1 | Все фазы |
| DevOps / Asterisk-инженер | 0.5 | Фазы 1, 4 |
| QA / тестировщик | 0.5 | Все фазы |
| Менеджер проекта | 0.5 | Все фазы |

## Критерии перехода между фазами

| Переход | Условие |
|---------|---------|
| Подготовка → Фаза 1 | Инфраструктура готова, API-ключи получены |
| Фаза 1 → Фаза 2 | MVP стабильно работает 1 неделю, >50% звонков обработано |
| Фаза 2 → Фаза 3 | Заказы оформляются корректно, нет критических багов |
| Фаза 3 → Фаза 4 | Все сценарии работают, >70% звонков без оператора |
