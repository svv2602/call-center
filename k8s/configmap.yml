apiVersion: v1
kind: ConfigMap
metadata:
  name: call-center-config
  namespace: call-center
  labels:
    app.kubernetes.io/part-of: call-center
data:
  # ---------------------------------------------------------------------------
  # AudioSocket
  # ---------------------------------------------------------------------------
  AUDIOSOCKET_HOST: "0.0.0.0"
  AUDIOSOCKET_PORT: "9092"

  # ---------------------------------------------------------------------------
  # Google Cloud Speech-to-Text
  # ---------------------------------------------------------------------------
  GOOGLE_STT_LANGUAGE_CODE: "uk-UA"
  GOOGLE_STT_ALTERNATIVE_LANGUAGES: "ru-RU"

  # ---------------------------------------------------------------------------
  # Google Cloud Text-to-Speech
  # ---------------------------------------------------------------------------
  GOOGLE_TTS_VOICE: "uk-UA-Standard-A"
  GOOGLE_TTS_SPEAKING_RATE: "1.0"

  # ---------------------------------------------------------------------------
  # Google Application Credentials (mount path for the service account JSON)
  # ---------------------------------------------------------------------------
  GOOGLE_APPLICATION_CREDENTIALS: "/var/secrets/google/credentials.json"

  # ---------------------------------------------------------------------------
  # Anthropic (Claude LLM)
  # ---------------------------------------------------------------------------
  ANTHROPIC_MODEL: "claude-sonnet-4-5-20250929"

  # ---------------------------------------------------------------------------
  # Store API
  # ---------------------------------------------------------------------------
  STORE_API_URL: "http://store-api:3000/api/v1"
  STORE_API_TIMEOUT: "5"

  # ---------------------------------------------------------------------------
  # Database (password injected from Secret via variable substitution)
  # ---------------------------------------------------------------------------
  DATABASE_URL: "postgresql+asyncpg://callcenter:$(POSTGRES_PASSWORD)@postgresql:5432/callcenter"

  # ---------------------------------------------------------------------------
  # Redis
  # ---------------------------------------------------------------------------
  REDIS_URL: "redis://redis:6379/0"
  REDIS_SESSION_TTL: "1800"

  # ---------------------------------------------------------------------------
  # Celery (async task queue)
  # ---------------------------------------------------------------------------
  CELERY_BROKER_URL: "redis://redis:6379/1"
  CELERY_RESULT_BACKEND: "redis://redis:6379/1"

  # ---------------------------------------------------------------------------
  # Logging
  # ---------------------------------------------------------------------------
  LOG_LEVEL: "INFO"
  LOG_FORMAT: "json"

  # ---------------------------------------------------------------------------
  # Quality scoring
  # ---------------------------------------------------------------------------
  QUALITY_LLM_MODEL: "claude-haiku-4-5-20251001"

  # ---------------------------------------------------------------------------
  # Feature flags
  # ---------------------------------------------------------------------------
  FF_STT_PROVIDER: "google"
